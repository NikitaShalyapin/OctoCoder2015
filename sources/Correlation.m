function Program
%fid = fopen( 'beacon1ch.sig', 'r' );
fid = fopen( 'beacons2.sig', 'r' );
if(fid == -1)
  error( 'File is not opened' )
end
Signal=fread(fid,'int16');
fclose(fid);
l=length(Signal);
j=1;
for i=1:2:l-1
    sig(j,1)=complex(Signal(i),Signal(i+1));
    j=j+1;
end
PRS_pre=[     1,  1,  1,  1,  1,  1, -1, -1, -1, -1,  1,  1,  1,  1, -1,  1,  1,  1, -1, -1, -1, -1,  1, -1,  1,  1, -1, -1,  1,  1, -1,  1, ...
              1, -1,  1,  1,  1,  1, -1,  1, -1, -1, -1, -1,  1,  1,  1, -1, -1,  1,  1, -1, -1, -1, -1,  1, -1, -1,  1, -1, -1, -1,  1, -1, ...
              1, -1,  1,  1,  1, -1,  1, -1,  1,  1,  1,  1, -1, -1,  1, -1, -1,  1, -1,  1,  1,  1, -1, -1,  1,  1,  1, -1, -1, -1, -1, -1, ...
             -1,  1,  1,  1, -1,  1,  1,  1, -1,  1, -1, -1,  1,  1,  1,  1, -1,  1, -1,  1, -1, -1,  1, -1,  1, -1, -1, -1, -1, -1, -1,  1, ...
             -1,  1, -1,  1, -1,  1, -1,  1,  1,  1,  1,  1, -1,  1, -1,  1,  1, -1,  1, -1, -1, -1, -1, -1,  1,  1, -1,  1,  1,  1, -1,  1, ...
              1, -1,  1,  1, -1,  1, -1,  1,  1, -1, -1, -1, -1, -1,  1, -1,  1,  1,  1, -1,  1,  1,  1,  1,  1, -1, -1, -1,  1,  1,  1,  1, ...
             -1, -1,  1,  1, -1,  1, -1, -1,  1,  1, -1,  1, -1,  1,  1,  1, -1, -1, -1,  1,  1, -1,  1, -1, -1, -1,  1, -1,  1,  1,  1,  1, ...
              1,  1,  1, -1,  1, -1, -1,  1, -1,  1,  1, -1, -1, -1,  1, -1,  1, -1, -1,  1,  1, -1, -1, -1,  1,  1, -1, -1, -1, -1, -1, -1, ...
             -1,  1,  1, -1, -1,  1,  1, -1, -1,  1, -1,  1, -1,  1,  1, -1, -1,  1, -1, -1,  1,  1,  1,  1,  1,  1, -1,  1,  1, -1,  1, -1, ...
             -1,  1, -1, -1,  1, -1, -1,  1,  1, -1,  1,  1,  1,  1,  1,  1, -1, -1,  1, -1,  1,  1, -1,  1, -1,  1, -1, -1, -1, -1,  1, -1, ...
              1, -1, -1, -1,  1, -1, -1,  1,  1,  1, -1,  1,  1, -1, -1,  1, -1,  1,  1,  1,  1, -1,  1,  1, -1, -1, -1, -1,  1,  1, -1,  1, ...
             -1,  1, -1,  1, -1, -1,  1,  1,  1, -1, -1,  1, -1, -1, -1, -1,  1,  1, -1, -1, -1,  1, -1, -1, -1, -1,  1, -1, -1, -1, -1, -1, ...
             -1, -1, -1,  1, -1, -1, -1,  1, -1, -1, -1,  1,  1, -1, -1,  1, -1, -1, -1,  1,  1,  1, -1,  1, -1,  1, -1,  1,  1, -1,  1,  1, ...
             -1, -1, -1,  1,  1,  1, -1, -1, -1,  1, -1, -1,  1, -1,  1, -1,  1, -1, -1, -1,  1,  1, -1,  1,  1, -1, -1,  1,  1,  1,  1,  1, ...
             -1, -1,  1,  1,  1,  1, -1, -1, -1,  1, -1,  1,  1, -1,  1,  1,  1, -1, -1,  1, -1,  1, -1, -1,  1, -1, -1, -1, -1, -1,  1, -1, ...
             -1,  1,  1, -1, -1,  1,  1,  1, -1,  1, -1, -1, -1,  1,  1,  1,  1,  1, -1,  1,  1,  1,  1, -1, -1, -1, -1, -1,  1,  1,  1];
j=1;
for i=1:1:length(PRS_pre)
    PRS(j)=PRS_pre(i);
    PRS(j+1)=PRS_pre(i);
    j=j+2;
end
l=length(PRS);
iteration=length(sig)-l;
for i=0:1:iteration
    corr_comp=0;
    for j=1:1:l
        corr_comp=corr_comp+PRS(j)*sig(j+i,1);
    end
    corr(i+1)=abs(corr_comp);
end
[max_c,nom]=max(corr)
plot(corr);
end